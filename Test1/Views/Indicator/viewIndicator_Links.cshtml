@model List<IndInv.Models.Indicator_Links>

@{
    ViewBag.Title = "viewIndicator_Links";
}
<table class="indicator-link-list">
	<thead>
		<tr>
			<th>
				Link ID
			</th>
			<th>
				Indicators
			</th>
			<th>
				Fields
			</th>
		</tr>
	</thead>
	<tbody>
@foreach (var link in Model)
{
	<tr class="indicator-link">
		<td class="indicator-link-container">
			@link.Link_ID
		</td>
		<td class="indicator-link-indicator-container">
			@foreach (var indicator in link.Indicator_Link_Indicators)
			{
				<div class="indicator-link-indicator">
					@indicator.Indicator_ID - @indicator.Indicator.Indicator
				</div>
			}
		</td>
		<td class="indicator-link-field-container">
			@foreach (var field in link.Indicator_Link_Fields)
			{
				<div class="indicator-link-field">
					@field.Link_Field.Link_Field
				</div>
			}
		</td>
		<td class="indicator-link-delete-container">
			<button class="delete-link" linkid="@link.Link_ID">Delete</button>
		</td>
	</tr>
}
	</tbody>
</table>
	
<style>
	.indicator-link-list, .indicator-link {
		width:100%;
	}

</style>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script>
	$('.delete-link').on('click', function (e) {
		var linkID = $(this).attr('linkid');
		var tr = $(this).closest('tr');
		$.post('deleteIndicatorLink', { linkID: linkID }, function (result) {
			tr.remove();
		});
	});
</script>
